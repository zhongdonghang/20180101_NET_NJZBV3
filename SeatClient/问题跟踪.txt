 /******************************************
 * 作者：王随
 * 创建时间：2013-5-18
 * 说明： 记录选座终端的BUG，未实现以及待实现的功能。
 * 修改人：
 * 修改时间：
 * ******************************************/

一、终端
	1.常坐座位选座，判断是否启用该功能。
	   判断阅览室开放状态，黑名单验证，选座次数验证，是否有人。  √
	2.判断是否启用输入座位号选座功能。							√
	3.判断设置的选座方式。    √
	2.配置文件加密处理。      
	3.预约功能激活，//激活，注销激活，重新激活。
	  * 预约激活 注销激活的关闭计时器界面偶尔会出现异常。
	4.预约入座，	//预约入座。
	5.无人值守模式。
		a.读者刷卡，选择座位。
		b.如果读者点击当前在座的座位，验证刷卡读者设置别人暂离的时间是否满足需求。则获取上个读者的进出记录。把刷卡的读者记录改为等待。把当前的记录改为刷卡读者点击座位上的读者。
		c.插入进出记录，判断等待记录的实体是否为空，如果不为空，则添加等待记录。
		*读卡刷卡回来，取消等待。 （待测试）√
		*读者取消等待，取消原来读者暂离。√
		*设置别人暂离前检测距离上次设置别人的暂离时长。（当前阅览室）√
		*
	6.打印凭条    √
		*等待座位打印凭条  √
		*预约凭条  √
		*选座凭条 √
	7.冠名图片获取。√
	8.进出记录查询。√
	9.违规提醒。
		*黑名单设置添加黑名单提醒选项：直接弹出消息提示/显示提示按钮
		*获取读者所有记录时，获取读者消息提醒列表。 √
	10.黑名单提醒。 
	11.异常处理，网络错误重试
		*所有通过key获取阅览室的地方，要进行异常捕获
	12.限制可以选座位的读者类型。 (待测试)√
	 
	15.数据库建立主外键关系。
	16.设置不可选座位。

	17.预约当天座位时候：
	    如果阅览室开启了无人值守模式，也开启了座位预约。
		*选座位时需要判断（一般选座、 输入座位号选座、 常坐座位选座）：  
		    检查座位是否被预约，检查座位是否有等待, 检查座位是否在座 
		   
	    *读者等待时需要判断：座位是否被预约。如果有预约则不能等待。
		*读者预约座位时需要判断：座位是否有等待，读者自己是否有座位，是否有黑名单。
		*预约入座的时候需要判断：座位是否有人在座。

	18.续时提示
	   续时次数判断，距离上次续时的时间判断
	19.选座页面布局初始化方法。√
	20.如果读者在一台触摸屏上选择一个阅览室的座位，在另外一台触摸屏上刷卡离开，则会提示阅览室错误。√
	21.判断终端授权。√
二、后台管理

三、监控服务

四、座位预约

五、手机预约


六、扩展功能
    1.自动更新
	2.终端配置工具。
	3.终端编号是否已经被其他终端试用（通过终端配置工具，可以强制使用该编号）。√
	4.违规记录过期
	5.主页面显示阅览室使用信息。
	6.终端编号验证机制。
	   * 启动：终端启动，根据本地配置的终端编号，进行验证，判断授权。首次启动，绑定本地MAC地址，防止终端终端编号重复。
	   * 授权：每天授权，从授权之日起，延长3天。间隔3天没有授权，取消使用权限。（类似签到，三天不签到取消使用权限。）DTU服务进行授权，监控服务取消授权。
	   * 永久授权：永久授权之后，终端使用不过期。
	7.后台管理中设备运行状态查看。（设备状态，外网通信）
 
 七、测试
    1.其他终端选座位，该终端刷卡。



2013-6-15 17:33
	1.黑名单限制改为全局设置。设置信息可以通过SystemObject中的管理规则设置中找到。
	2.阅览室设置中只需要设置是否启用黑名单限制即可。
	3.管理规则设置中可以设置实名制座位， 黑名单规则。
	4.选择阅览室时需要判断阅览室是否启用黑名单设置、黑名单规则是否启用，是否存在黑名单记录即可。可以封装到一个方法中。
	终端上需要验证黑名单的地方：
		1.手动选座
		2.输入座位号选座
		3.常坐座位选座
		4.

 阅览室设置：